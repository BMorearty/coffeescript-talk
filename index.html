<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>CoffeeScript for Rubyists</title>

  <meta name="viewport" content="width=device-width"/>

  <link rel="stylesheet" href="./css/reset.css" type="text/css"/>
  <link rel="stylesheet" href="./css/showoff.css" type="text/css"/>

  <script type="text/javascript" src="./js/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="./js/jquery.cycle.all.js"></script>
	<script type="text/javascript" src="./js/jquery-print.js"></script>
  <script type="text/javascript" src="./js/jquery.batchImageLoad.js"></script>

  <script type="text/javascript" src="./js/jquery.doubletap-0.1.js"></script>

  <script type="text/javascript" src="./js/fg.menu.js"></script>
  <script type="text/javascript" src="./js/showoff.js"></script>
  <script type="text/javascript" src="./js/jTypeWriter.js"> </script>
  <script type="text/javascript" src="./js/sh_main.min.js"></script>
  <script type="text/javascript" src="./js/core.js"></script>
  <script type="text/javascript" src="./js/showoffcore.js"></script>
  <script type="text/javascript" src="./js/coffee-script.js"></script>

  <link type="text/css" href="./css/fg.menu.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/theme/ui.all.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/sh_style.css" rel="stylesheet" >

  
    <link rel="stylesheet" href="file/styles.css" type="text/css"/>
  

  

  <script type="text/javascript">
  $(function(){
      setupPreso(false, './');
  });
  </script>

</head>

<body>

<a tabindex="0" href="#search-engines" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" id="navmenu"><span class="ui-icon ui-icon-triangle-1-s"></span>slides</a>
<div id="navigation" class="hidden"></div>

<div id="help">
  <table>
    <tr><td class="key">z, ?</td><td>toggle help (this)</td></tr>
    <tr><td class="key">space, &rarr;</td><td>next slide</td></tr>
    <tr><td class="key">shift-space, &larr;</td><td>previous slide</td></tr>
    <tr><td class="key">d</td><td>toggle debug mode</td></tr>
    <tr><td class="key">## &lt;ret&gt;</td><td>go to slide #</td></tr>
    <tr><td class="key">c, t</td><td>table of contents (vi)</td></tr>
    <tr><td class="key">f</td><td>toggle footer</td></tr>
    <tr><td class="key">r</td><td>reload slides</td></tr>
    <tr><td class="key">n</td><td>toggle notes</td></tr>
    <tr><td class="key">p</td><td>run preshow</td></tr>
  </table>
</div>

<div class="buttonNav">
  <input type="submit" onClick="prevStep();" value="prev"/>
  <input type="submit" onClick="nextStep();" value="next"/>
</div>

<div id="preso">loading presentation...</div>
<div id="footer">
  <span id="slideInfo"></span>
  <span id="debugInfo"></span>
  <span id="notesInfo"></span>
</div>

<div id="slides" class="offscreen" style="display:none;">
<div class="slide" data-transition="none"><div class="content subsection" ref="01-intro/intro/1">
<h1>CoffeeScript for Rubyists</h1>

<p>Brian Morearty</p>

<p>Jan. 5, 2012</p>

<p><img src="./file/01-intro/../images/coffeescript.png" width="225" height="50" alt="CoffeeScript"/></p>

<p class="notes">Is CoffeeScript really so great? Why use it instead of good ol' JavaScript?</p></div>
</div><div class="slide" data-transition="none"><div class="content" ref="01-intro/intro/2">
<h1>This Talk</h1>

<ul>
<li>Too many slides

<ul>
<li>Some are for reference</li>
</ul>
</li>
<li>Save questions for the end

<ul>
<li>Or talk fast</li>
</ul>
</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content incremental" ref="01-intro/intro/3">
<h1>Who Am I?</h1>

<ul>
<li>Programming since 1982 <img src="./file/01-intro/../images/osborne1.jpg" width="192" height="120" alt="Osborne 1"/></li>
<li>Former lead eng. of QuickBooks UI</li>
<li>Co-founder of a new startup</li>
<li>And an independent consultant</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content incremental" ref="01-intro/intro/4">
<h1>Why Am I Talking About CoffeeScript?</h1>

<ul>
<li>I like concise languages</li>
<li>Doing CoffeeScript for 6 months</li>
<li>In Rails 3.0 and 3.1 apps</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="01-intro/intro/5">
<h1>What I Will Talk About</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="01-intro/intro/6">
<h1>CoffeeScript (duh)</h1>

<ul>
<li>How to install it</li>
<li>Using it in a pre-3.1 Rails app</li>
<li>Dealing with legacy JavaScript</li>
<li>Why Ruby programmers might like CoffeeScript</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="01-intro/intro/7">
<h1>Bonus</h1>

<ul>
<li>ONE thing about CoffeeScript that's better than Ruby</li>
</ul>


<p><img src="./file/01-intro/../images/boxer.jpg" width="319" height="291" alt="boxer"/></p></div>
</div><div class="slide" data-transition="none"><div class="content" ref="01-intro/intro/8">
<h1>But First</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="01-intro/intro/9">
<h1>What is CoffeeScript?</h1>

<ul>
<li>A language that compiles to JavaScript</li>
<li>Whitespace is significant</li>
<li>Compiled JS output is pretty-printed</li>
<li>Can use JS libraries (and vice-versa)</li>
<li>There is no interpretation at runtime</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="02-install/install/1">
<h1>PART 1: How to Install It</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="02-install/install/2">
<h1>Four Steps</h1>

<ul>
<li>Install Node</li>
<li>Install Node Package Manager (npm)</li>
<li>Install CoffeeScript</li>
<li>Install js2coffee</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="02-install/install/3">
<h1>1. Install Node</h1>

<ul>
<li>http://nodejs.org/</li>
<li>Click Macintosh Installer or build it yourself (brew installer was out-of-date last time I tried it)</li>
<li>Run the installer</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="02-install/install/4">
<h1>2. Install Node Package Manager (npm)</h1>

<ul>
<li><code>curl http://npmjs.org/install.sh | sh</code></li>
<li>More info at http://npmjs.org/</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="02-install/install/5">
<h1>3. Install CoffeeScript</h1>

<ul>
<li><code>npm install -g coffee-script</code></li>
<li>Don't forget the <code>-g</code>. This installs it globally.</li>
<li>And the dash in coffee-script.</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="02-install/install/6">
<h1>4. Install js2coffee</h1>

<ul>
<li><code>npm install -g git://github.com/rstacruz/js2coffee.git</code></li>
<li>Don't just install "js2coffee." It's old.</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="03-barista/barista/1">
<h1>PART 2: Using It In a Pre-3.1 Rails App</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="03-barista/barista/2">
<h1>Barista <img src="./file/03-barista/../images/barista.jpg" width="169" height="200" alt="barista"/></h1>

<pre class="sh_ruby"><code># optional; must be *before* barista:
gem 'haml-rails'

# Only needed on Ruby 1.8:
gem "json" 

gem "barista"</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="03-barista/barista/3">
<h1>Install</h1>

<pre><code>bundle install
rails generate barista:install
</code></pre>

<p class="notes">Generates a config file</p></div>
</div><div class="slide" data-transition="none"><div class="content" ref="03-barista/barista/4">
<h1>Profit</h1>

<ul>
<li>Place your CoffeeScripts in <code>app/coffeescripts</code> using the <code>.coffee</code> extension.</li>
<li>Generated JavaScript goes into <code>public/javascripts</code>.

<ul>
<li>In the right subfolder if applicable.</li>
</ul>
</li>
</ul>


<p class="notes">Don't use <code>.js.coffee</code></p></div>
</div><div class="slide" data-transition="none"><div class="content" ref="03-barista/barista/5">
<h1>Put CoffeeScript in HAML With <code>:coffeescript</code>.</h1>

<pre><code>%p hello, world.

:coffeescript
  $ -&gt;
    initialize()
</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="03-barista/barista/6">
<h1>Barista Deploy Options</h1>

<ul>
<li>Default: generate on the fly in development. Deploy .js files.</li>
<li>Add <code>rake barista:brew</code> to your Capistrano script.</li>
<li>Install <code>therubyracer</code> on prod and generate on the fly there.</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="04-migration/migration/1">
<h1>PART 3: Dealing With Legacy JavaScript</h1></div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="04-migration/migration/2">
<h1><code>js2coffee</code> to the Rescue</h1>

<pre><code><code class="command">$ js2coffee &lt; emc2.js &gt; emc2.coffee</code>
</code></pre>

<ul>
<li>Does it need a beautifier?</li>
<li>Nope. CoffeeScript has to be indented anyway.</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="04-migration/migration/3">
<h1>Is There a <code>coffee2js</code>?</h1>

<p>Think hard.</p>

<p><img src="./file/04-migration/../images/thinking.jpg" width="206" height="200" alt="think hard"/></p></div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="05-rubyists/for-rubyists/1">
<h1>PART 4: Why Rubyists Might Like CoffeeScript</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="05-rubyists/for-rubyists/2">
<h1>a.k.a. The Fun Part</h1>

<p><img src="./file/05-rubyists/../images/funpart.jpg" width="461" height="250" alt="fun part"/></p></div>
</div><div class="slide" data-transition="none"><div class="content" ref="05-rubyists/for-rubyists/3">
<h1>CoffeeScript Has Good Stuff From:</h1>

<p><img src="./file/05-rubyists/../images/ruby.gif" width="167" height="60" alt="Ruby"/> +
<img src="./file/05-rubyists/../images/javascript.gif" width="80" height="60" alt="JavaScript"/> +
<img src="./file/05-rubyists/../images/python.png" width="193" height="60" alt="Python"/></p>

<p>=</p>

<p><img src="./file/05-rubyists/../images/coffeescript.png" width="225" height="50" alt="CoffeeScript"/></p>

<p>(But it seems most heavily influenced by Ruby.)</p></div>
</div><div class="slide" data-transition="none"><div class="content center" ref="05-rubyists/for-rubyists/4">
<h1>Semicolons</h1>

<h2>Just Like Ruby</h2>

<pre class="sh_coffeescript"><code>pi = 3.14159</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="05-rubyists/for-rubyists/5">
<h1>Parentheses</h1>

<h2>Almost Like Ruby</h2>

<pre class="sh_coffeescript"><code>console.log calc result</code></pre>

<p>compiles to:</p>

<pre class="sh_javascript"><code>console.log(calc(result));</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="05-rubyists/for-rubyists/6">
<h1>But If Not Passing Any Parameters...</h1>

<h2>Parens Are Required</h2>

<pre class="sh_coffeescript"><code>redAlert()</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="05-rubyists/for-rubyists/7">
<p><img src="./file/05-rubyists/../images/stabby_croc.jpg" width="405" height="250" alt="stabby croc"/></p>

<h1>Stabby Proc</h1>

<h2>Like Ruby 1.9</h2>

<ul>
<li>Except params come before stabby</li>
<li>Stabby proc is THE WAY to define a function</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="05-rubyists/for-rubyists/8">
<h1>Stabby Proc Example</h1>

<pre class="sh_coffeescript"><code>fib = (n) -&gt;
  return n if n in [0,1]
  fib(n-1) + fib(n-2)

result = fib(10)</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="05-rubyists/for-rubyists/9">
<h1>No Params -&gt; No Parens</h1>

<pre class="sh_coffeescript"><code>clearFlash = -&gt;
  $('.flash').html('')</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="05-rubyists/for-rubyists/10">
<h1>String Interpolation</h1>

<h2>Just Like Ruby</h2>

<pre class="sh_coffeescript"><code>greeting = 'allo'
result   = "You had me at #{greeting}"</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="05-rubyists/for-rubyists/11">
<h1>Heredocs With String Interpolation</h1>

<h2>Just Like Ruby</h2>

<pre class="sh_coffeescript"><code>name = 'Inigo Montoya'
result = """
         Hello. My name is #{name}.
         You killed my father.
         Prepare to die.
         """</code></pre>

<p class="notes">Only double-quoted heredocs have string interpolation.</p></div>
</div><div class="slide" data-transition="none"><div class="content" ref="05-rubyists/for-rubyists/12">
<h1>Ending a Block of Code</h1>

<h2>Like Python &amp; Haml, Not Ruby</h2>

<pre class="sh_coffeescript"><code>if milk.spilled()
  $('#message').html("Don't cry")

result(speed) = -&gt;
  if speed &gt; 65
    "ticket"
  else
    "you're good"</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="05-rubyists/for-rubyists/13">
<h1>Default Values For Arguments</h1>

<h2>Just Like Ruby</h2>

<pre class="sh_coffeescript"><code>loadData = (page = 1) -&gt;
  $(data).load("/data?page=#{page}")</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="05-rubyists/for-rubyists/14">
<h1>Variables Declared at First Assignment</h1>

<h2>Just Like Ruby</h2>

<!-- * No "var" keyword. Assign a variable to declare it.-->


<pre class="sh_coffeescript"><code>movie = 'School of Rock'</code></pre>

<p>compiles to:</p>

<pre class="sh_javascript"><code>var movie;
movie = 'School of Rock';</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="05-rubyists/for-rubyists/15">
<h1>To Reference a Variable in Two Methods</h1>

<h2>Assign a Value</h2>

<pre class="sh_coffeescript"><code>cache = undefined
store: (value) -&gt;
  cache = value
retrieve: -&gt;
  cache</code></pre>

<p class="notes">"This behavior is effectively identical to Ruby's scope for local variables."</p></div>
</div><div class="slide" data-transition="none"><div class="content" ref="05-rubyists/for-rubyists/16">
<h1>Speaking of Variables: No Globals</h1>

<p class="notes">All Output Code Is Wrapped in an Anonymous Function</p>

<pre class="sh_javascript"><code>// generated JavaScript goes in anon func
(function() {
  # ur codez go hear
})();</code></pre>

<p/>

<pre class="sh_coffeescript"><code># I want to access this from other files
window.regions = ['West','East',
                  'North','South']</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="05-rubyists/for-rubyists/17">
<h1>Postfix <code>if</code></h1>

<h2>Just Like Ruby</h2>

<pre class="sh_coffeescript"><code>return true if found</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="05-rubyists/for-rubyists/18">
<h1><code>unless</code> and postfix <code>unless</code></h1>

<h2>Just Like Ruby</h2>

<pre class="sh_coffeescript"><code>die() unless lives &gt; 0</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="05-rubyists/for-rubyists/19">
<h1>Everything Is an Expression</h1>

<h2>Just Like Ruby</h2>

<p class="notes">At least, as much as possible. break, continue, and return are not converted to expressions.</p>

<ul>
<li>Last statement is an implied <code>return</code>.</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content execute smaller center" ref="05-rubyists/for-rubyists/20">
<h1>No Ternary Operator</h1>

<h2>But <code>if</code>/<code>then</code>/<code>else</code> Is an Expression</h2>

<pre class="sh_coffeescript"><code>language = if serverside then 'ruby' else 'coffeescript'</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="05-rubyists/for-rubyists/21">
<h1><code>for</code> Loop Syntax Is...</h1>

<h2>Just Like Ruby</h2>

<pre class="sh_coffeescript"><code>for movie in ['The Princess Bride',
              'West Side Story']
  record movie</code></pre>

<p class="notes">Use 'for own key, value of object' to loop over
'hasOwnProperty()' properties.</p></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="05-rubyists/for-rubyists/22">
<h1>Ranges</h1>

<h2>A Lot Like Ruby</h2>

<pre class="sh_coffeescript"><code>result = [ 1..5 ]</code></pre>

<p/>

<pre class="sh_coffeescript"><code>result = [ 1...5 ]</code></pre>

<p class="notes">Like Ruby, two dots includes the last value and three dots excludes it.</p></div>
</div><div class="slide" data-transition="none"><div class="content" ref="05-rubyists/for-rubyists/23">
<h1><code>@property</code></h1>

<h2>Just Like Ruby</h2>

<ul>
<li>Shortcut for <code>this.property</code></li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="05-rubyists/for-rubyists/24">
<h1><code>then</code></h1>

<h2>Just Like Ruby</h2>

<pre class="sh_coffeescript"><code>if hasKey then enter()</code></pre>

<ul>
<li>Useful for 1-line if and case statements</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="05-rubyists/for-rubyists/25">
<h1>The Existential "<code>?</code>" Operator</h1>

<h2>Like Ruby's <code>.nil?</code></h2>

<pre class="sh_coffeescript"><code>if expression
  # not null, undefined, false,
  # "", 0, or NaN
if expression?
  # neither null nor undefined</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="05-rubyists/for-rubyists/26">
<h1>Multiple Assignments in a Single Statement</h1>

<h2>Similar to Ruby</h2>

<pre class="sh_coffeescript"><code>[oldMax, max] = [max, newMax]
[firstName, lastName] = getName()</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="05-rubyists/for-rubyists/27">
<h1>What is the One Way CoffeeScript is Even Better Than Ruby?</h1></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="05-rubyists/for-rubyists/28">
<h1>"<code>?.</code>"</h1>

<h2>Like Ruby's <code>try</code> or <code>andand</code> Gem</h2>

<h2>Nicer Syntax Than Ruby</h2>

<pre class="sh_coffeescript"><code>person = null
result = typeof(person?.name)</code></pre>

<p class="notes">If ?. is called on null or undefined it returns undefined instead of raising TypeError. "Accessor variant of the existential operator."</p></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="05-rubyists/for-rubyists/29">
<h1>Good for Function Chaining</h1>

<pre class="sh_coffeescript"><code>person = {}
oldestKid = person.kids?[0]?.name?.first
result = typeof(oldestKid)</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="06-conclusion/conclusion/1">
<h1>Conclusion</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="06-conclusion/conclusion/2">
<h1>Lots of Other Things I Didn't Mention</h1>

<ul>
<li>Optional YAML-like syntax for object literals</li>
<li>Splats for var-args</li>
<li>etc., etc.</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="06-conclusion/conclusion/3">
<h1>Bibliography</h1>

<p>http://coffeescript.org/ (try the playground)</p>

<p>http://js2coffee.org/ (two-way playground)</p>

<p>https://github.com/Sutto/barista</p></div>
</div><div class="slide" data-transition="none"><div class="content" ref="06-conclusion/conclusion/4">
<h1>Thank You.</h1>

<p>Brian Morearty</p>

<p>http://ilikestuffblog.com/</p>

<p><strong>http://bmorearty.github.com/coffeescript-talk/</strong></p>

<p>brian@morearty.org</p>

<p>@BMorearty on Twitter and GitHub</p></div>
</div></div>

</body>
</html>
